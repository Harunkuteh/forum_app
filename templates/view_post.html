{% extends "base.html" %}
{% block content %}
<h2>{{ post.title }}</h2>
<p>{{ post.content }}</p>
<small>By <a href="{{ url_for('profile', user_id=post.author.id) }}">{{ post.author.username }}</a> on {{ post.date_posted.strftime('%Y-%m-%d %H:%M') }}</small>

{% if current_user.is_authenticated and (current_user.id == post.user_id or current_user.is_admin) %}
    <a href="{{ url_for('delete_post', post_id=post.id) }}" class="delete-btn">Delete</a>
{% endif %}

<h3>Comments</h3>
{% for comment in post.comment_set %}
<div class="comment">
    <p>{{ comment.content }}</p>
    <small>By <a href="{{ url_for('profile', user_id=comment.user.id) }}">{{ comment.user.username }}</a> on {{ comment.date_posted.strftime('%Y-%m-%d %H:%M') }}</small>
</div>
{% else %}
<p>No comments yet.</p>
{% endfor %}

{% if current_user.is_authenticated %}
<h4>Add Comment</h4>
<form method="POST">
    {{ form.hidden_tag() }}
    <p>{{ form.content(rows=3, cols=50) }}</p>
    <p>{{ form.submit() }}</p>
</form>
{% endif %}
{% endblock %}
